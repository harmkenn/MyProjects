---
title: "Pick the Next Etrade Mutual Fund"
author: "Ken Harmon"
date: "`r format(Sys.time(), '%Y %B %d')`"
output:
  html_document:  
    keep_md: true
    code_folding: hide
    fig_height: 6
    fig_width: 12
    fig_align: 'center'
editor_options: 
  chunk_output_type: console
---

# {.tabset .tabset-fade}

```{r, echo=FALSE}
knitr::opts_chunk$set(echo = TRUE, message = FALSE, warning = FALSE)
```

```{r load_libraries, include=FALSE}
# Use this R-Chunk to load all your libraries!
pacman::p_load(tidyverse, caret, stocks, BatchGetSymbols, Quandl)
theme_set(theme_bw())
confusionMatrix <- caret::confusionMatrix
select <- dplyr::select
```

```{r swd, eval=FALSE, echo=FALSE}
# this is set to not run during the knit process
# this sets the working directory to the file location
setwd(dirname(rstudioapi::getActiveDocumentContext()$path))
```
###ETRADE OLD
```{r fun}
EMF <- load_prices(c("AMAGX","AMANX","BGAFX","ETGLX","NBGEX","NNLEX","NNTWX","OBCHX","PGRTX","PRMTX","PYVLX","SEEKX","SFLNX","WPSGX"),from = "2019-09-01",to = "2020-01-01" ,initial = 1000)
dates <- row.names(EMF)
MF <- colnames(EMF)
rend <- c(527.19,614.87,1068.41,1472.09,1118.74,1927.69,1656.94,7130.33,1549.30,1067.61,1242.87,759.55,819.96,1150.92)
end <- as.numeric(last(EMF))
scale <- rend / end
trip <- EMF %*% diag(scale)
EMF <- data.frame(trip)
rownames(EMF) <- dates
colnames(EMF) <- MF
EMF$total <- rowSums( EMF[,1:dim(EMF)[2]] )
EMF$inc <- (EMF$total-EMF$total[1])/EMF$total[1] 
```

###IRA OLD
```{r fun}
EMF <- load_prices(c("GABSX","SFLNX","AMAGX","GOLDX","TMFGX"),from = "2018-09-01",to = "2019-01-01" ,initial = 1000)
dates <- row.names(EMF)
MF <- colnames(EMF)
rend <- c(2055.96,324.72,575.00,2063.43,860.30)
end <- as.numeric(last(EMF))
scale <- rend / end
trip <- EMF %*% diag(scale)
EMF <- data.frame(trip)
rownames(EMF) <- dates
colnames(EMF) <- MF
EMF$total <- rowSums( EMF[,1:dim(EMF)[2]] )
EMF$inc <- (EMF$total-EMF$total[1])/EMF$total[1] 
```

###ETRADE New
```{r fun}
EMF <- load_prices(c("AMAGX","AMANX","BGAFX","ETGLX","NBGEX","NNLEX","NNTWX","OBCHX","PGRTX","PRMTX","PYVLX","SEEKX","SFLNX","WPSGX"),from = "2019-09-01",to = "2020-01-01" ,initial = 1000)
dates <- row.names(EMF)
MF <- colnames(EMF)
rend <- c(527.19,614.87,1068.41,1472.09,1118.74,1927.69,1656.94,7130.33,1549.30,1067.61,1242.87,759.55,819.96,1150.92)
end <- as.numeric(last(EMF))
scale <- rend / end
trip <- EMF %*% diag(scale)
EMF <- data.frame(trip)
rownames(EMF) <- dates
colnames(EMF) <- MF
EMF$total <- rowSums( EMF[,1:dim(EMF)[2]] )
EMF$inc <- (EMF$total-EMF$total[1])/EMF$total[1] 
```

###ETRADE All
```{r fun}
EMF <- load_prices(c("AMAGX","AMANX","BGAFX","BMGAX","DXQLX","ETGLX","FKDNX","MFEGX","NBGEX","NNLEX","NNTWX","OBCHX","PGRTX","PRMTX","PYVLX","ROGSX","RYOCX","SEEKX","SFLNX","SMPIX","SVAAX","TMFGX","UOPIX","WPSGX","AKREX","AMAGX","BGSAX","BPTRX","DXSLX","FNCMX","GOLDX","INPIX","JAGTX","LDVAX","PGTAX","PYVAX","RMQHX","RYOCX","RYVYX","SFLNX","SWPPX","TEPSX","TMFGX","ULPIX"
),from = "2019-09-01",initial = 1000)
dates <- row.names(EMF)
MF <- colnames(EMF)
rend <- c(491.91,570.34,1018.51,1123.53,919.22,1367.79,1008.84,1013.88,1050.62,1816.57,1560.19,3983.21,1458.67,1109.69,1170.04,911.51,1073.08,699.44,754.97,962.44,1436.74,834.19,1006.44,1058.54,988.14,536.52,972.8,1536.09,942.62,940.83,2197.26,879.81,1050.59,466.45,918.64,581.29,767.17,1017.04,913.22,298.98,659.79,907.31,813.1,953.87
)
end <- as.numeric(last(EMF))
scale <- rend / end
trip <- EMF %*% diag(scale)
EMF <- data.frame(trip)
rownames(EMF) <- dates
colnames(EMF) <- MF
EMF$total <- rowSums( EMF[,1:dim(EMF)[2]] )
EMF$inc <- (EMF$total-EMF$total[1])/EMF$total[1] 
```