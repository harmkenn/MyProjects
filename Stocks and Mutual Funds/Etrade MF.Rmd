---
title: "Pick the Next Etrade Mutual Fund"
author: "Ken Harmon"
date: "`r format(Sys.time(), '%Y %B %d')`"
output:
  html_document:  
    keep_md: true
    code_folding: hide
    fig_height: 6
    fig_width: 12
    fig_align: 'center'
editor_options: 
  chunk_output_type: console
---

# {.tabset .tabset-fade}

```{r, echo=FALSE}
knitr::opts_chunk$set(echo = TRUE, message = FALSE, warning = FALSE)
```

```{r load_libraries, include=FALSE}
# Use this R-Chunk to load all your libraries!
pacman::p_load(tidyverse, caret, stocks, BatchGetSymbols, Quandl)
theme_set(theme_bw())
confusionMatrix <- caret::confusionMatrix
select <- dplyr::select
```

```{r swd, eval=FALSE, echo=FALSE}
# this is set to not run during the knit process
# this sets the working directory to the file location
setwd(dirname(rstudioapi::getActiveDocumentContext()$path))
```

```{r fun}
EMF <- load_prices(c("AMAGX","AMANX","BGAFX","DXQLX","ETGLX","NBGEX","NNLEX","NNTWX","OBCHX","PGRTX","PRMTX","PYVLX","RYOCX","SEEKX","SFLNX","SMPIX","SVAAX","TMFGX","UOPIX","WPSGX"),from = "2019-01-01" ,initial = 1000)
dates <- row.names(EMF)
MF <- colnames(EMF)
rend <- c(.52259,.61136,1.05453,1.06439,1.45918,1.11357,1.92769,1.64709,7.00920,1.53851,1.05434,1.23956,1.15593,.75372,.81409,1.11899,1.50540,.87236,1.17204,1.13947)
end <- as.numeric(last(EMF))
scale <- rend / end * 1000
trip <- EMF %*% diag(scale)
EMF <- data.frame(trip)
rownames(EMF) <- dates
colnames(EMF) <- MF
EMF$total <- rowSums( EMF[,1:20] )
EMF$inc <- (EMF$total-EMF$total[1])/EMF$total[1] 
```

```{r}
EMF <- load_prices(c("AMAGX","AMANX","BGAFX","DXQLX","ETGLX","NBGEX","NNLEX","NNTWX","OBCHX","PGRTX","PRMTX","PYVLX"),from = "2019-01-01" ,initial = 1000)
dates <- row.names(EMF)
MF <- colnames(EMF)
rend <- c(.52259,.61136,1.05453,1.06439,1.45918,1.11357,1.92769,1.64709,7.00920,1.53851,1.05434,1.23956)
end <- as.numeric(last(EMF))
scale <- rend / end * 1000
trip <- EMF %*% diag(scale)
EMF <- data.frame(trip)
rownames(EMF) <- dates
colnames(EMF) <- MF
EMF$total <- rowSums( EMF[,1:dim(EMF)[2]] )
EMF$inc <- (EMF$total-EMF$total[1])/EMF$total[1] 
```

